<!DOCTYPE html>
<html lang="en">
<head>
    {{ partial "head.html" . }}

    <style>

        @font-face {
              font-family: 'Satoshi';
              font-style: normal;
              src: url('/fonts/Satoshi.woff2') format('woff2');
              font-display: swap;
              font-weight: 1 999;  
            }

        @font-face {
              font-family: 'Petrona';
              font-style: normal;
              src: url('/fonts/Petrona-Italic.woff2');
              font-display: swap;
              font-weight: 1 999;  
            }

        html{
            scroll-behavior: smooth;
        }

        body{
            padding: 5rem 0%;
            font-family: Satoshi, system-ui;
            text-align: center;
            background: #fff;
            color: #444;
        }

        h1{
/*            font-family: Iowan Old Style;*/
            font-size: 3rem;
            margin: 0.5rem 0rem;
            line-height: 1.3em;
            text-align: center;
            font-weight: 100;
            font-variant: small-caps;
        }

        h2{
            line-height: 1.3em;
            font-size: 1.2em;
            text-align: center;
            margin: 6rem 0rem 2rem 0rem;
            font-weight: 900;
            scroll-margin: 2rem;
        }

        p{
            margin: 1.5rem 0rem;
        }

        table{
/*            width: 100%;*/
/*            padding: 1rem 2rem;*/
            margin: 2.5rem auto;
        }

        td{
            padding: 8px 5rem 0px 0px;
/*            width: 50%;*/
            font-size: 16px;

        }

        .subtitle{
            font-weight: 200;
            font-family: system-ui;
            font-size: 1rem;
            width: 100%;
            text-align: center;
            margin-bottom: 4.5rem;
            letter-spacing: -0.5px;
           }

           @keyframes pulsate {
               0% { 
                   opacity: 0;
               }
               80% { 
                   opacity: 1.0;
               }
               100% { 
                   opacity: 0;
               }
           }

        .grid-2{
            display: flex;
            column-gap: 4rem;
            padding: 4rem 0rem;
            column-count: 2;
            flex-wrap: wrap;
            flex-basis: e;
        }

        .grid-2 .grid-entry{
            width: 50%;
            line-height: 1.5em;
            display: inline-block;
        }

        main{
            max-width: 39rem;
            width: 90%;
            line-height: 1.44em;
            display: inline-block;
            text-align: left;
            font-size: 17px;
            position: relative;
        }

        .portfolio{
            width: 120%;
            margin-left: -10%;
            margin-top: 0rem;
            column-count: 2;
            column-gap: 5%;
        }

        .broad{
            width: 100%;
            margin: 1.6%;
            display: inline-block;
            line-height: 0px;
            box-sizing: border-box;
            border-radius: 5px;
        }

        figcaption{
            font-size: 11px;
            line-height: 1.5em;
            font-style: italic;
            margin-bottom: 1rem;
            color: #666;

        }

      /*  .broad:hover .last{
            position: absolute;
        }

        .broad:hover figcaption{
            height: fit-content;
            margin-bottom: 0.75rem;
        }
*/
        img, video{
            width: 100%;
            height: auto;
            margin: 0px;
            margin-bottom: 10px;
            border-radius: 5px;
            box-shadow: 0px 1px 5px #ddd;
            box-sizing: border-box;
        }

        a{
            color: inherit;
            text-decoration-thickness: 1.5px;
            text-underline-offset: 2px;
            text-decoration-style: dotted;
        }

        p a:hover{
            text-decoration-thickness: 1px;
            text-decoration-style: solid;
            background: rgba(240, 240, 240, 0.8);
            padding: 0px 1.5px;
            border-radius: 5px;
            margin: 0px -1.5px;
        }

        a:hover img, a:hover video{
            box-shadow: 0px 0px 3px #bbb;

        }

        em{
            font-weight: 300;
        }

        .sidenote-right{
            display: inline;
            position: absolute;
            width: 15rem;
            font-size: 14px;
            line-height: 1.5em;
            font-style: italic;
            font-weight: 200;
            font-family: Palatino, serif;
            margin-left: 105%;
            padding-top: 0.5rem;
        }

        ol, li{
            margin: 1.5rem 0rem;
        }

        blockquote{
            font-family: Petrona, Iowan Old Style, serif;
            font-style: italic;
            font-size: 18px;
            line-height: 1.5em;
            margin: 3rem 3rem 3rem 3rem;
            color: #444;
        }

        .subtitle a, blockquote a{
            text-decoration: none;
            box-shadow: 0 0 0 0 rgba(0, 0, 0, 1);
        }

        blockquote a:hover{
            text-decoration: underline;
            text-decoration-thickness: 1.5px;
            text-underline-offset: 3px;
            text-decoration-style: dotted;
            text-decoration-color: #999;
            background: transparent;
        }

        sup{
            font-size: 10px;
        }

        .toc{
            position: fixed;
            top: 40vh;
            left: 2rem;
        }

        .toc a{
            text-decoration: none;
            font-weight: 200;
            display: block;
            margin: 0.4em 0rem;
            color: #666;
        }

        .toc a:hover{
            font-weight: 600;
            font-style: normal;
            text-decoration: underline;
            text-decoration-thickness: 1px;
        }

        @media screen and (max-width: 900px){
            .portfolio{
                width: 100%;
                margin-left: 0%;
            }

            .toc{
                display: none;
            }
        }

        @media screen and (max-width: 600px){

            .portfolio{
                    column-count: 1;
                    margin-top: 0rem;
                }

            .broad{
                margin: 3% 0rem;
            }

            figcaption{
                font-size: 13px;
                line-height: 1.5em;
                font-style: italic;
                overflow: hidden;
                height: fit-content;
                margin-bottom: 0.75rem;

            }

            table{
                margin: 2.5rem 0px;
            }

            td{
                padding: 8px 3rem 0px 0px;
            }
        }

    </style>
</head>

<body>
    <main>
        <h1> webcraft</h1>
        <div class=subtitle> by <a href="https://joodaloop.com"> Judah </a></div>

        {{ .Content }}

        <div class=toc>
            <a href="#the-problem" id="toc-the-problem">The Problem</a>
            <a href="#the-portfolio" id="toc-the-portfolio">Portfolio</a>
            <a href="#the-process" id="toc-the-process"> Process</a>
            <a href="#the-price" id="toc-the-price"> Price</a>
            <a href="#postscript" id="toc-postscript"> Postscript</a>
        </div>

    </main>
<!-- 
<main>
    <div class=title-holder>
        <h1> I design and develop the best personal websites you've ever seen. </h1>
        <span class=subtitle> I also do other stuff, like typographical audits and . </span>
    </div>

    <div class=grid-2>
        <div class=grid-entry>
            <h3> Typography </h3>
            <p> Arranging text on a screen is </p>
        </div>
        <div class=grid-entry>
            <h3> Information Architecture </h3>
            <p> Blogs are easy, all they have is blogposts. But that is far from being the only format that the web makes possible.  </p>
        </div>
        <div class=grid-entry>
            <h3> Best practices </h3>
            <p> Semantic HTML, responsiveness, perfect 100s on Lighthouse tests, progressive enhancement. There are better and worse ways to build for the web, and I do my best to stick to the former.  </p>
        </div>
        <div class=grid-entry>
            <h3> Desire-shaping </h3>
            <p> <i>What do I even want from a personal website?</i> is a question that is surprisingly rare. Even when they do ask it, most people aren't aware of the possibilities that are open to them. I don't blame them, the majority of the web is a bland   </p>
        </div>
    </div>
</main>
 -->

    <script>

        let prevID = "the-problem"

        function getCurrentHeadingId() {
          // Get all the <h2> elements in the document
          const headings = Array.from(document.getElementsByTagName('h2'));

          // Function to check if an element is in the viewport
          function isElementInViewport(element) {
            const rect = element.getBoundingClientRect();
            return (
              rect.top >= 0 &&
              rect.left >= 0 &&
              rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
              rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
          }

          // Find the first <h2> element in the viewport
          const currentHeading = headings.find(isElementInViewport);

          // Retrieve the ID of the current <h2> element
          const currentHeadingId = currentHeading ? currentHeading.id : null;

          return currentHeadingId;
        }

        // Call the function and retrieve the current heading ID
        const currentId = getCurrentHeadingId();
        console.log(currentId);

        document.addEventListener("scroll", () => {

            const headings = Array.from(document.getElementsByTagName('h2'));
            let current = getCurrentHeadingId() ?? prevID
            prevID = current

            
            for(let ele of headings){
                document.getElementById("toc-" + ele.id).style.fontWeight = "200"
                console.log(ele)
            }

                document.getElementById("toc-" + current).style.fontWeight = "800"
            
        })



    </script>
</body>

</html>